<template name="client">
  {{#if isReady 'currentUser'}}
  {{#if role}}
  {{#if switch}}
  <section class="content-header">
    <h1>
      Client
      <small>Master</small>
    </h1>
    <ol class="breadcrumb">
      <li><a href="#"><i class="fa fa-dashboard"></i>Client</a></li>
    </ol>
  </section>
  <section class="content">
    <div class="row">
      <div class="col-lg-6">
        {{> flashMessages}}
      </div>
    </div>
    <div class="row">
      <div class="col-lg-12">
        <div class="col-xs-3 pull-right">
          <div class="col-xs-2"><label>Search:</label></div>
          <div class="col-xs-8 pull-right"><input id="filterClient" type="text" class="form-control" required></div>
        </div>
        <table id="tblClient" class="footable table table-striped table-bordered table-condensed toggle-arrow-tiny" data-page-size="8" data-limit-navigation="5" data-filter=#filterClient>
          <thead class="deep-purple lighten-1 white-text">
            <tr>
              <th data-toggle="true"> client</th>
              <th data-toggle="true"> Projects</th>
              <th>Status</th>
              <th>Add project</th>
              <th>Edit</th>
              {{#each clientData}}
              {{#each projects}}
              <th data-hide="all">#</th>
              {{/each}}
              {{/each}}
            </tr>
          </thead>
          <tbody>
            {{#each clientData}}
            <tr>
              <td>{{name}}</td>
              <td>{{projectCount}}</td>
              <td><input id="{{id}}" type="checkbox" name="client-checkbox" class="client-status" {{checkedSwitch status}} data-size="mini"></td>
              <td><a href="#" id="lnkAddProject" class="fa fa-plus-circle" data="{{id}}"></a></td>
              <td id="{{id}}"><a href="#" id="lnkEditClient" class="fa fa-pencil" data="{{name}}"></a></td>
              {{#each projects}}
              <td>
                <table class="table">
                  <tbody>
                    <tr>
                      <td>{{this.projectName}}</td>
                      <td><input id="{{projectId}}" type="checkbox" name="client-checkbox" class="project-status" {{checkedSwitch projectStatus}} data-size="mini"></td>
                      <td id="{{projectId}}"><a href="#" id="lnkEditProject" class="fa fa-pencil" data="{{../id}}"></a></td>
                    </tr>
                  </tbody>
                </table>
              </td>
              {{/each}}
            </tr>
            {{/each}}
          </tbody>
          <tfoot>
            <tr>
              <td colspan="8">
                <ul class="pagination pull-right"></ul>
              </td>
            </tr>
          </tfoot>
        </table>
      </div>
    </div>
    <br>
    <form id="clientForm">
      <div class="row">
        <div class="col-md-6 col-md-offset-8">
          <div class="form-group col-md-6">
            <input id="hdnClientId" type="hidden">
            <input id="txtClient" type="text" class="form-control"  placeholder="Enter Client" required>
          </div>
          <div class="col-md-3">
            <button type="submit" class="btn btn-primary btn-submit"><i class="fa fa-plus-circle fa-3x" aria-hidden="true"></i></button>
          </div>
        </div>
      </div>
    </form>
  </section>
  {{/if}}
  {{else}}
  {{> notFound}}
  {{/if}}
  {{/if}}
</template>

<template name="addProject">
  <a href="#" id="lnkAddProject" class="fa fa-plus-circle"></a>
</template>
